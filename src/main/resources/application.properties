spring.application.name=DocIx

# Database Configuration (PostgreSQL)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/docix}
spring.datasource.driver-class-name=${DATABASE_DRIVER:org.postgresql.Driver}
spring.datasource.username=${DATABASE_USERNAME:docix_user}
spring.datasource.password=${DATABASE_PASSWORD:docix_password}
spring.jpa.database-platform=${DATABASE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.baseline-version=0

# Elasticsearch Configuration
spring.elasticsearch.uris=${ELASTICSEARCH_URL:http://localhost:9200}

# MinIO Configuration
minio.url=${MINIO_URL:http://localhost:9000}
minio.access-key=${MINIO_ACCESS_KEY:minioadmin}
minio.secret-key=${MINIO_SECRET_KEY:minioadmin}
minio.bucket-name=${MINIO_BUCKET_NAME:docix-documents}

# RabbitMQ Configuration - Updated to match docker-compose
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:guest}
spring.rabbitmq.virtual-host=${RABBITMQ_VIRTUAL_HOST:/}

# Document Processing Queue Configuration
docix.processing.queue.name=${DOCIX_QUEUE_NAME:document.processing.queue}
docix.processing.exchange.name=${DOCIX_EXCHANGE_NAME:document.processing.exchange}
docix.processing.routing.key=${DOCIX_ROUTING_KEY:document.processing}

# Document Page-based Processing Configuration
# Page-based indexing is now used instead of segmentation

# File Upload Configuration
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:100MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:100MB}
spring.servlet.multipart.enabled=true

# Document Indexing Configuration
docix.indexing.max-retry=${DOCIX_INDEXING_MAX_RETRY:3}
docix.indexing.retry.interval=${DOCIX_INDEXING_RETRY_INTERVAL:300000}
docix.indexing.batch.size=${DOCIX_INDEXING_BATCH_SIZE:10}

# Bulk Upload Configuration
docix.bulkupload.max-concurrent=${DOCIX_BULK_MAX_CONCURRENT:5}
docix.bulkupload.timeout=${DOCIX_BULK_TIMEOUT:30000}

# Graceful shutdown (Spring Boot built-in)
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s